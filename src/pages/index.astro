---
import type { Membership } from '@devprotocol/clubs-core'
import { type ClubsPropsPages } from '@devprotocol/clubs-core'
import { CheckoutFromPassportOffering } from '@devprotocol/clubs-plugin-passports'

import type { SectionOrderingValue } from '..'
import Home from '../components/Home/Pages.vue'
import type { ComposedItem, HomeConfig, PassportItemData } from '../types'

type Props = ClubsPropsPages & {
	memberships?: Membership[]
	homeConfig: HomeConfig
	name: string
	sectionsOrderConfig: SectionOrderingValue
	clubsPaymentsOverrides: ComposedItem[]
	passportOfferings: PassportItemData[]
	passportOfferingsWithComposedData: CheckoutFromPassportOffering
}

const {
	memberships,
	homeConfig,
	name,
	clubs,
	sectionsOrderConfig,
	clubsPaymentsOverrides,
	passportOfferings,
	passportOfferingsWithComposedData,
} = Astro.props

const langs = Astro.request.headers.get('accept-language')?.split(',') ?? ['en']
---

<Home
	client:load
	passportOfferings={passportOfferings}
	homeConfig={homeConfig}
	langs={langs}
	passportOfferingsWithComposedData={passportOfferingsWithComposedData}
/>
