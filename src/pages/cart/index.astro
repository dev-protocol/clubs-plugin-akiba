---
import Cart from '../../components/Cart/Pages.vue'
import type { ClubsPropsPages, Membership } from '@devprotocol/clubs-core'
import type { ComposedItem, GlobalConfig, HomeConfig } from '../../types.ts'
import type { SectionOrderingValue } from '../../index.ts'
import type { CheckoutFromPassportOffering } from '@devprotocol/clubs-plugin-passports'
import { parsedLangs } from '../../utils/langs'

const langs = parsedLangs(Astro.request.headers.get('accept-language'))

type Props = ClubsPropsPages & {
	memberships?: Membership[]
	homeConfig: HomeConfig
	name: string
	sectionsOrderConfig: SectionOrderingValue
	clubsPaymentsOverrides: ComposedItem[]
	globalConfig: GlobalConfig
	passportOfferingsWithComposedData: CheckoutFromPassportOffering
	base: string
}

const { clubs } = Astro.props
const SlotsAkibaCheckoutResultAfterHeading = clubs.slots.filter(({ slot }) => {
	return slot === 'akiba:checkout:result:after-heading'
})
---

<Cart
	client:load
	langs={langs}
	globalConfig={Astro.props.globalConfig}
	passportOfferingsWithComposedData={Astro.props
		.passportOfferingsWithComposedData}
	base={Astro.props.base}
>
	{
		SlotsAkibaCheckoutResultAfterHeading.map((Slot) => (
			<Slot.component {...Slot.props} slot="checkout:result:after-heading" />
		))
	}

	<slot
		name="akiba:checkout:result:after-heading"
		slot="checkout:result:after-heading"
	/>
</Cart>
